<!doctype html>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>SwipeLeft test</title>
<script type="module" src="../src/gestureManager.js"></script>
<script type="module" src="../src/gestures/swipeLeft.js"></script>
<script src="testUtils.js"></script>
<style>
  :root {
    --light-gray-text: #999;
  }
  body {
    min-height: 100vh;
    border: 4px solid #EEE;
    margin: 0px;
  }
  @media (prefers-color-scheme: dark) {
    body {
      background: #222;
      color: #FFF;
      border-color: #444;
    }
  }
  .messageContainer {
    position:relative;
    max-width: 600px;
    width: 100%;
    border:1px solid green;
    font-family: sans-serif;
    overflow:hidden;
  }
  .message {
    line-height: 1.2em;
    padding: 8px;
  }
  .message .line1 {
    display:flex;
  }
  .line1 .sender {
    font-weight: bold;
    flex-grow: 1;
  }
  .line1 .datetime {
    color: var(--light-gray-text);
    flex-grow:1;
    text-align:right;
  }
  .message .line2 {
    overflow: hidden;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
  .message .line3 {
    color: var(--light-gray-text);
    height: 2.4em;
    overflow: hidden;
    text-overflow: ellipsis;
  }
  </style>
<h1>SwipeLeft test</h1>
<!-- <div id="t1" style="border:1px solid black;width:300px;height:200px;">
  &lt;--- Swipe left
</div>
<div id="t2" style="border:1px solid black;width:300px;height:200px;">
  <gesture-logger></gesture-logger>
  I am just a test.
</div> -->
<div id="t3">
  <div class="messageContainer">
    <div class="message">
      <div class="line1">
        <div class="sender">Ian Kilpatrick (via X)</div>
        <div class="datetime">Yesterday</div>
      </div>
      <div class="line2">
        Visit a world of entertainment with KQED such as three body problem
      </div>
      <div class="line3">
        Explore new places, periods and experiences with KQED passport. Members can stream new episodes of Call the Midwife 30 days before they are on TV.
      </div>
    </div><!-- message -->
  </div><!-- messgeContainer -->
</div>

<script type="module">
  import SwipeLeft from "../src/gestures/swipeLeft.js";
  import GestureManager from "../src/gestureManager.js";
  import SwipeLeftButtonMenuEffect from "../src/effects/swipeLeftButtonMenuEffect.js";
  import createButtonMenu from  "../src/effects/buttonMenu.js";

  function test5() {
    let el = document.querySelector("#t3");
    let mc = el.querySelector(".messageContainer");

    let swipeLeftOptions = {
      container: mc,
      contentSelector: ".message",
      menuBuilder: createButtonMenu,
      menuBuilderOptions: {
        items: [
          {title: "Moreâ€¦", color: "#c8c7ce"},
          {title: "Flag", color: "#ff9503"},
          {title: "Trash", color: "#ff3a2e", default: true }
        ]
      }
    };
    let g = new SwipeLeft(mc, {effects: new LoggerEffect(new SwipeLeftButtonMenuEffect(swipeLeftOptions))});
    GestureManager.addGesture(mc, g);
  }

  test5();
  // test3();

</script>